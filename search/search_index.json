{"config":{"lang":["it"],"separator":"[\\s\\-]+","pipeline":["stopWordFilter"],"fields":{"title":{"boost":1000.0},"text":{"boost":1.0},"tags":{"boost":1000000.0}}},"docs":[{"location":"","title":"ISTAT Cell Data","text":"<p>Con ISTAT Cell Data puoi ottenere facilmente il set di dati riferiti ai censimenti ISTAT in cui sono stati  rilasciati anche i dati delle celle censuarie.</p> <p>E' possibile scaricare e processare i dati dal 1991 al 2021.</p>"},{"location":"#installazione","title":"Installazione","text":"<p><code>pip install istatcelldata</code></p> <p>Info</p> <p>Questo progetto non \u00e8 collegato ad ISTAT n\u00e8 supportato da ISTAT ed \u00e8 una iniziativa autonoma di Massimiliano Moraca.</p> <p>Questo repository \u00e8 stato creato grazie a MkDocs, Material for MkDocs e mkdocstring.</p>"},{"location":"LICENSE/","title":"Licenza","text":"<p>MIT License</p> <p>Copyright (c) 2023 Massimiliano Moraca</p> <p>Permission is hereby granted, free of charge, to any person obtaining a copy of this software and associated documentation files (the \"Software\"), to deal in the Software without restriction, including without limitation the rights to use, copy, modify, merge, publish, distribute, sublicense, and/or sell copies of the Software, and to permit persons to whom the Software is furnished to do so, subject to the following conditions:</p> <p>The above copyright notice and this permission notice shall be included in all copies or substantial portions of the Software.</p> <p>THE SOFTWARE IS PROVIDED \"AS IS\", WITHOUT WARRANTY OF ANY KIND, EXPRESS OR IMPLIED, INCLUDING BUT NOT LIMITED TO THE WARRANTIES OF MERCHANTABILITY, FITNESS FOR A PARTICULAR PURPOSE AND NONINFRINGEMENT. IN NO EVENT SHALL THE AUTHORS OR COPYRIGHT HOLDERS BE LIABLE FOR ANY CLAIM, DAMAGES OR OTHER LIABILITY, WHETHER IN AN ACTION OF CONTRACT, TORT OR OTHERWISE, ARISING FROM, OUT OF OR IN CONNECTION WITH THE SOFTWARE OR THE USE OR OTHER DEALINGS IN THE SOFTWARE.</p>"},{"location":"documentation/data/","title":"Modulo Data","text":"<p>Questo modulo gestisce i dati non geografici.</p>"},{"location":"documentation/data/#istatcelldata.data.preprocess_data","title":"<code>preprocess_data(data_folder, data_column_remapping=None, add_administrative_informations=None, regions_data_path=None, regions_target_columns=None, provinces_data_path=None, provinces_target_columns=None, municipalities_data_path=None, municipalities_target_columns=None, output_folder=None)</code>","text":"<p>Preprocessa i file CSV del censimento e restituisce i dati aggregati e il tracciato.</p> <p>La funzione esegue le seguenti operazioni:</p> <ol> <li>Cerca tutti i file CSV nella cartella indicata.</li> <li>Utilizza l\u2019ultimo CSV (in ordine alfabetico) come file di tracciato (trace).</li> <li>Carica e concatena tutti gli altri CSV in un unico DataFrame.</li> <li>Applica, se fornita, una mappatura dei nomi di colonna (<code>data_column_remapping</code>).</li> <li>Aggiunge, se richiesto, le informazioni amministrative (regioni, province, comuni).</li> <li>Sostituisce eventuali valori NaN con 0.</li> <li>Carica il file di tracciato in un DataFrame dedicato.</li> <li>Restituisce:</li> <li>o un dizionario con i DataFrame <code>census_data</code> e <code>trace</code>,</li> <li>oppure salva i CSV risultanti in <code>output_folder</code> e restituisce il percorso.</li> </ol> PARAMETER DESCRIPTION <code>data_folder</code> <p>Cartella contenente i file CSV da processare.</p> <p> TYPE: <code>Path</code> </p> <code>data_column_remapping</code> <p>Dizionario di mappatura per rinominare le colonne del dataset di censimento (es. <code>{\"pro_com\": \"PRO_COM\"}</code>).</p> <p> TYPE: <code>dict</code> DEFAULT: <code>None</code> </p> <code>add_administrative_informations</code> <p>Se True, arricchisce i dati con informazioni amministrative (regioni, province, comuni) tramite <code>add_administrative_info()</code>.</p> <p> TYPE: <code>bool</code> DEFAULT: <code>None</code> </p> <code>regions_data_path</code> <p>Percorso del file contenente i dati delle regioni.</p> <p> TYPE: <code>Path</code> DEFAULT: <code>None</code> </p> <code>regions_target_columns</code> <p>Lista delle colonne da estrarre/tenere per i dati delle regioni.</p> <p> TYPE: <code>list</code> DEFAULT: <code>None</code> </p> <code>provinces_data_path</code> <p>Percorso del file contenente i dati delle province.</p> <p> TYPE: <code>Path</code> DEFAULT: <code>None</code> </p> <code>provinces_target_columns</code> <p>Lista delle colonne da estrarre/tenere per i dati delle province.</p> <p> TYPE: <code>list</code> DEFAULT: <code>None</code> </p> <code>municipalities_data_path</code> <p>Percorso del file contenente i dati dei comuni.</p> <p> TYPE: <code>Path</code> DEFAULT: <code>None</code> </p> <code>municipalities_target_columns</code> <p>Lista delle colonne da estrarre/tenere per i dati dei comuni.</p> <p> TYPE: <code>list</code> DEFAULT: <code>None</code> </p> <code>output_folder</code> <p>Cartella di destinazione in cui salvare i file: - <code>census_data.csv</code> per i dati concatenati; - <code>census_trace.csv</code> per il tracciato. Se None, i dati vengono restituiti come dizionario di DataFrame.</p> <p> TYPE: <code>Path</code> DEFAULT: <code>None</code> </p> RETURNS DESCRIPTION <code>Union[dict, Path]</code> <p>Union[dict, Path]: - dict: con le chiavi:     - <code>\"census_data\"</code> \u2192 DataFrame con i dati del censimento concatenati;     - <code>\"trace\"</code> \u2192 DataFrame con il tracciato dei campi.   Restituito se <code>output_folder</code> \u00e8 None. - Path: percorso di <code>output_folder</code>, se specificato, in cui sono stati   salvati i file <code>census_data.csv</code> e <code>census_trace.csv</code>.</p> RAISES DESCRIPTION <code>ValueError</code> <p>Se non viene trovato alcun file CSV nella cartella indicata.</p> Notes <ul> <li>Il file di tracciato (trace) \u00e8 considerato l\u2019ultimo CSV in ordine   alfabetico all\u2019interno di <code>data_folder</code>.</li> <li>La funzione <code>check_encoding()</code> viene utilizzata per determinare   l\u2019encoding corretto dei file CSV.</li> </ul>"},{"location":"documentation/download/","title":"Modulo Download","text":"<p>Il modulo Download fornisce una serie di funzioni per scaricare e gestire dati censuari ed i confini amministrativi.  Le funzioni principali permettono di scaricare i dati da link specifici, organizzare i file in strutture di cartelle e  gestire il processo di estrazione e cancellazione automatica dei file ZIP.</p>"},{"location":"documentation/download/#istatcelldata.download.download_base","title":"<code>download_base(data_link, data_file_path_destination, data_folder, destination_folder)</code>","text":"<p>Scarica un file da URL, mostra una barra di avanzamento ed estrae lo ZIP risultante.</p> <p>La funzione gestisce l\u2019intero flusso di download di un archivio (tipicamente ZIP) a partire da un URL HTTP/HTTPS, salvandolo in un percorso locale, mostrando una barra di avanzamento tramite <code>tqdm</code>, estraendo il contenuto nella cartella di destinazione e infine rimuovendo il file compresso.</p> PARAMETER DESCRIPTION <code>data_link</code> <p>URL da cui scaricare il file (es. archivio ZIP dei dati censuari).</p> <p> TYPE: <code>str</code> </p> <code>data_file_path_destination</code> <p>Percorso completo del file da creare in locale (file compresso scaricato).</p> <p> TYPE: <code>Path</code> </p> <code>data_folder</code> <p>Cartella in cui verr\u00e0 estratto il contenuto del file compresso.</p> <p> TYPE: <code>Path</code> </p> <code>destination_folder</code> <p>Cartella logica di destinazione associata al dataset scaricato; viene restituita al termine del processo per coerenza con il workflow chiamante.</p> <p> TYPE: <code>Path</code> </p> RETURNS DESCRIPTION <code>Path</code> <p>Percorso di <code>destination_folder</code>, utilizzabile come riferimento alla radice dei dati scaricati ed estratti.</p> <p> TYPE: <code>Path</code> </p> RAISES DESCRIPTION <code>Exception</code> <p>Se il server restituisce un codice di stato HTTP diverso da 200 oppure se si verifica un qualsiasi errore durante il download, il salvataggio o l\u2019estrazione del file.</p>"},{"location":"documentation/download/#istatcelldata.census1991.download.download_all_census_data_1991","title":"<code>download_all_census_data_1991(output_data_folder, region_list=[])</code>","text":"<p>Scarica l'intero set di dati censuari e geografici relativi al Censimento 1991.</p> <p>Questa funzione coordina tutte le operazioni necessarie per ottenere i dati censuari e le informazioni geografiche associate al Censimento 1991. Consente di scaricare:</p> <ul> <li>dati censuari tabellari,</li> <li>geodati specifici per una o pi\u00f9 Regioni,</li> <li>confini amministrativi ufficiali.</li> </ul> <p>Se non viene fornito alcun valore per <code>region_list</code>, vengono scaricati i geodati relativi a tutte le Regioni.</p> PARAMETER DESCRIPTION <code>output_data_folder</code> <p>Percorso principale in cui salvare tutti i dati scaricati e processati.</p> <p> TYPE: <code>Path</code> </p> <code>region_list</code> <p>Lista contenente i codici o nomi delle Regioni di cui scaricare i geodati. Se vuota, vengono considerate tutte le Regioni disponibili.</p> <p> TYPE: <code>List</code> DEFAULT: <code>[]</code> </p> RETURNS DESCRIPTION <code>Path</code> <p>Percorso della cartella radice contenente i dati scaricati.</p> <p> TYPE: <code>Path</code> </p> Notes <ul> <li>La funzione opera esclusivamente sul Censimento 1991.</li> <li>Utilizza funzioni di supporto come <code>download_data()</code>,   <code>download_geodata()</code> e <code>download_administrative_boundaries()</code>.</li> <li>Crea automaticamente la struttura di cartelle necessaria.</li> </ul>"},{"location":"documentation/download/#istatcelldata.census1991.download.download_data","title":"<code>download_data(output_data_folder, census_year)</code>","text":"<p>Scarica, organizza ed elabora i dati censuari per un determinato anno.</p> <p>La funzione gestisce l'intero flusso di acquisizione dei dati censuari dall\u2019origine fino alla produzione dei file CSV finali. Vengono effettuate le seguenti operazioni:</p> <ol> <li>Recupero del dizionario dei link relativi all'anno censuario.</li> <li>Download dei dati grezzi tramite la funzione <code>dwn()</code>.</li> <li>Creazione della struttura di cartelle di output.</li> <li>Individuazione e lettura dei file <code>.xls</code>.</li> <li>Conversione dei file Excel in CSV.</li> <li>Estrazione del tracciamento (metadati/codifiche) dal primo file disponibile.</li> <li>Rimozione dei file Excel originali.</li> </ol> PARAMETER DESCRIPTION <code>output_data_folder</code> <p>Percorso della cartella radice in cui salvare i dati scaricati.</p> <p> TYPE: <code>Path</code> </p> <code>census_year</code> <p>Anno di riferimento dei dati censuari da trattare.</p> <p> TYPE: <code>int</code> </p> RETURNS DESCRIPTION <code>Path</code> <p>Percorso della cartella contenente i dati censuari scaricati</p> <p> TYPE: <code>Path</code> </p> <code>Path</code> <p>ed elaborati.</p> RAISES DESCRIPTION <code>Exception</code> <p>Se non viene trovato alcun file <code>.xls</code> nella cartella dei dati.</p> Notes <ul> <li>La conversione da XLS a CSV viene eseguita tramite la funzione <code>read_xls()</code>.</li> <li>Il tracciamento del dataset viene effettuato solo sul primo file XLS trovato.</li> <li>I file XLS vengono rimossi a fine processo per ridurre lo spazio occupato.</li> </ul>"},{"location":"documentation/download/#istatcelldata.census2001.download.download_all_census_data_2001","title":"<code>download_all_census_data_2001(output_data_folder, region_list=[])</code>","text":"<p>Scarica l'intero set di dati censuari e geografici relativi al Censimento 2001.</p> <p>Questa funzione coordina tutte le operazioni necessarie per ottenere i dati censuari e le informazioni geografiche associate al Censimento 2001. In particolare, si occupa di:</p> <ul> <li>scaricare i dati censuari tabellari;</li> <li>scaricare i geodati (per tutte le Regioni o per un sottoinsieme specificato);</li> <li>scaricare i confini amministrativi ufficiali.</li> </ul> <p>Se <code>region_list</code> \u00e8 vuota, vengono scaricati i geodati per tutte le Regioni disponibili.</p> PARAMETER DESCRIPTION <code>output_data_folder</code> <p>Percorso principale in cui salvare tutti i dati scaricati e processati.</p> <p> TYPE: <code>Path</code> </p> <code>region_list</code> <p>Lista dei codici o nomi delle Regioni di cui scaricare i geodati. Se lasciata vuota, la funzione considera tutte le Regioni.</p> <p> TYPE: <code>List</code> DEFAULT: <code>[]</code> </p> RETURNS DESCRIPTION <code>Path</code> <p>Percorso della cartella radice <code>output_data_folder</code> contenente la struttura dei dati del Censimento 2001.</p> <p> TYPE: <code>Path</code> </p> Notes <ul> <li>La funzione \u00e8 specifica per il Censimento 2001 (il parametro <code>census_year</code>   \u00e8 fissato internamente a 2001).</li> <li>Utilizza le funzioni di supporto:   <code>download_data()</code>, <code>download_geodata()</code> e   <code>download_administrative_boundaries()</code>.</li> <li>Crea automaticamente una sottocartella dedicata al preprocessing,   definita dalla costante <code>PREPROCESSING_FOLDER</code>.</li> </ul>"},{"location":"documentation/download/#istatcelldata.census2011.download.download_administrative_boundaries","title":"<code>download_administrative_boundaries(output_data_folder, census_year)</code>","text":"<p>Scarica i confini amministrativi per un anno di censimento e li salva nella struttura dati.</p> <p>La funzione recupera dal dizionario dei censimenti l\u2019URL dei confini amministrativi (regioni, province, comuni), prepara la struttura di cartelle dedicata all\u2019anno censuario e scarica il file ZIP associato. Il contenuto non viene estratto: la funzione si limita al download.</p> PARAMETER DESCRIPTION <code>output_data_folder</code> <p>Percorso principale in cui verr\u00e0 creata la struttura per i dati del censimento.</p> <p> TYPE: <code>Path</code> </p> <code>census_year</code> <p>Anno censuario di riferimento (ad esempio: 1991, 2001, 2011).</p> <p> TYPE: <code>int</code> </p> RETURNS DESCRIPTION <code>Path</code> <p>Percorso della cartella contenente i confini amministrativi scaricati.</p> <p> TYPE: <code>Path</code> </p> RAISES DESCRIPTION <code>Exception</code> <p>Se si verifica un errore durante la creazione delle cartelle o durante il download.</p> Notes <ul> <li>I confini amministrativi includono comuni, province e regioni.</li> <li>Il file viene salvato nella cartella definita dalla costante   <code>BOUNDARIES_DATA_FOLDER</code>.</li> <li>Il percorso restituito \u00e8 la cartella dell\u2019anno censuario, non il singolo file scaricato.</li> </ul>"},{"location":"documentation/download/#istatcelldata.census2011.download.download_all_census_data_2011","title":"<code>download_all_census_data_2011(output_data_folder, region_list=[])</code>","text":"<p>Scarica l\u2019intero set di dati censuari e geografici relativi al Censimento 2011.</p> <p>Questa funzione coordina le tre operazioni fondamentali necessarie per ottenere tutti i dati relativi al Censimento della Popolazione 2011:</p> <ol> <li>Download dei dati censuari tabellari.</li> <li>Download dei geodati per una o pi\u00f9 Regioni (o tutte, se <code>region_list</code> \u00e8 vuota).</li> <li>Download dei confini amministrativi ufficiali.</li> </ol> <p>Oltre a scaricare i file, la funzione crea in automatico la struttura di cartelle necessaria all\u2019interno della directory di output.</p> PARAMETER DESCRIPTION <code>output_data_folder</code> <p>Percorso principale in cui salvare tutti i dati del censimento.</p> <p> TYPE: <code>Path</code> </p> <code>region_list</code> <p>Lista contenente i codici o i nomi delle Regioni di cui scaricare i geodati. Se non viene fornita o \u00e8 vuota, la funzione scarica i dati per tutte le Regioni.</p> <p> TYPE: <code>List</code> DEFAULT: <code>[]</code> </p> RETURNS DESCRIPTION <code>Path</code> <p>Percorso della cartella radice contenente la struttura dei dati del Censimento 2011.</p> <p> TYPE: <code>Path</code> </p> Notes <ul> <li>\u00c8 una funzione specifica per il censimento 2011 (il parametro <code>census_year</code>   \u00e8 fissato internamente).</li> <li>Usa le funzioni di supporto: <code>download_data()</code>, <code>download_geodata()</code>,   <code>download_administrative_boundaries()</code>.</li> <li>La cartella interna usata per il preprocessing \u00e8 determinata dalla costante   <code>PREPROCESSING_FOLDER</code>.</li> </ul>"},{"location":"documentation/download/#istatcelldata.census2011.download.download_data","title":"<code>download_data(output_data_folder, census_year)</code>","text":"<p>Scarica i dati censuari per un anno specifico e organizza la cartella di lavoro.</p> <p>La funzione recupera dal dizionario dei censimenti il link ai dati relativi all'anno indicato, prepara la struttura di cartelle di destinazione e delega il download effettivo alla funzione <code>download_base()</code>. Al termine restituisce il percorso del file scaricato (o della cartella, a seconda di come <code>download_base()</code> \u00e8 implementata).</p> PARAMETER DESCRIPTION <code>output_data_folder</code> <p>Percorso della cartella di output in cui creare la struttura dati del censimento (es. cartella di preprocessing o progetto).</p> <p> TYPE: <code>Path</code> </p> <code>census_year</code> <p>Anno di riferimento del censimento di cui scaricare i dati (es. 1991, 2001, 2011).</p> <p> TYPE: <code>int</code> </p> RETURNS DESCRIPTION <code>Path</code> <p>Percorso restituito da <code>download_base()</code>, che rappresenta la posizione dei dati censuari scaricati (file o cartella).</p> <p> TYPE: <code>Path</code> </p> RAISES DESCRIPTION <code>Exception</code> <p>Se si verifica un errore durante il recupero del link, la creazione delle cartelle o il download dei dati.</p>"},{"location":"documentation/download/#istatcelldata.census2011.download.download_geodata","title":"<code>download_geodata(output_data_folder, census_year, region_list=[])</code>","text":"<p>Scarica i dati geocensuari per una o pi\u00f9 Regioni relative a un anno di censimento.</p> <p>La funzione recupera gli URL dei pacchetti geocensuari (ZIP) tramite <code>get_census_dictionary()</code>, crea la struttura delle cartelle di destinazione per l'anno censuario e procede a scaricare i file ZIP relativi alle regioni richieste. Se <code>region_list</code> \u00e8 vuota, vengono scaricati i dati per tutte le Regioni disponibili nel dizionario (tipicamente 20).</p> PARAMETER DESCRIPTION <code>output_data_folder</code> <p>Cartella radice in cui salvare l'intera struttura dei dati censuari.</p> <p> TYPE: <code>Path</code> </p> <code>census_year</code> <p>Anno di riferimento del censimento (es. 1991, 2001, 2011).</p> <p> TYPE: <code>int</code> </p> <code>region_list</code> <p>Lista dei codici ISTAT delle Regioni di cui scaricare i geodati. Se vuota, vengono scaricati i geodati per tutte le Regioni predefinite.</p> <p> TYPE: <code>List[int]</code> DEFAULT: <code>[]</code> </p> RETURNS DESCRIPTION <code>Path</code> <p>Percorso della cartella contenente i file ZIP geocensuari scaricati.</p> <p> TYPE: <code>Path</code> </p> Notes <ul> <li>La funzione non esegue l'estrazione degli ZIP: scarica solamente i file.</li> <li>Gli URL dei geodati sono ottenuti dal dizionario del censimento tramite   la chiave <code>geodata_urls</code>.</li> <li>Il percorso finale dei dati \u00e8 organizzato tramite la costante globale   <code>GEODATA_FOLDER</code>.</li> </ul>"},{"location":"documentation/download/#istatcelldata.census2021.download.download_all_census_data_2021","title":"<code>download_all_census_data_2021(output_data_folder, region_list=[])</code>","text":"<p>Scarica l\u2019intero set di dati censuari e geografici relativi al Censimento 2021.</p> <p>Questa funzione esegue tutte le operazioni necessarie per ottenere i dati censuari del 2021, coordinando automaticamente:</p> <ol> <li>Il download dei dati censuari tabellari.</li> <li>Il download dei geodati delle Regioni richieste (o di tutte, se <code>region_list</code> \u00e8 vuota).</li> <li>Il download dei confini amministrativi ufficiali.</li> </ol> <p>La funzione crea automaticamente la struttura di cartelle necessaria per organizzare i dati, definita dalla costante <code>PREPROCESSING_FOLDER</code>.</p> PARAMETER DESCRIPTION <code>output_data_folder</code> <p>Percorso principale in cui salvare i dati del Censimento 2021.</p> <p> TYPE: <code>Path</code> </p> <code>region_list</code> <p>Codici o nomi delle Regioni di cui scaricare i geodati. Se la lista \u00e8 vuota, vengono scaricati i geodati di tutte le Regioni.</p> <p> TYPE: <code>List</code> DEFAULT: <code>[]</code> </p> RETURNS DESCRIPTION <code>Path</code> <p>Percorso della cartella radice che contiene l\u2019intera struttura dei dati scaricati per il Censimento 2021.</p> <p> TYPE: <code>Path</code> </p> Notes <ul> <li>Il parametro <code>census_year</code> \u00e8 fissato a 2021.</li> <li>Utilizza le funzioni di supporto:   <code>download_data()</code>, <code>download_geodata()</code>,   <code>download_administrative_boundaries()</code>.</li> </ul>"},{"location":"documentation/download/#istatcelldata.census2021.download.download_data","title":"<code>download_data(output_data_folder, census_year)</code>","text":"<p>Scarica, organizza e converte i dati censuari in formato elaborabile.</p> <p>Questa funzione gestisce l\u2019intero flusso di download e preparazione dei dati censuari per un anno specifico. Individua i file XLSX presenti, ne esegue la conversione in CSV e rimuove i file originali non pi\u00f9 necessari.</p> PARAMETER DESCRIPTION <code>output_data_folder</code> <p>Percorso della cartella principale in cui salvare i dati scaricati e processati.</p> <p> TYPE: <code>Path</code> </p> <code>census_year</code> <p>Anno di riferimento dei dati censuari da scaricare.</p> <p> TYPE: <code>int</code> </p> RETURNS DESCRIPTION <code>Path</code> <p>Percorso della cartella contenente i dati scaricati e processati.</p> <p> TYPE: <code>Path</code> </p> RAISES DESCRIPTION <code>Exception</code> <p>Se non viene trovato alcun file XLSX nella cartella dei dati scaricati.</p> Notes <ul> <li>I file XLSX vengono convertiti in CSV per facilitare le fasi   successive di ETL e analisi.</li> <li>I file XLSX originali vengono eliminati per ridurre lo spazio occupato.</li> <li>La struttura finale dei dati dipende dalle costanti globali   <code>DATA_FOLDER</code> e <code>CENSUS_DATA_FOLDER</code>.</li> </ul>"},{"location":"documentation/download/#istatcelldata.executor.download.download_census","title":"<code>download_census(years, output_data_folder, region_list=[])</code>","text":"<p>Scarica i dati censuari per uno o pi\u00f9 anni richiesti, inclusi geodati e confini amministrativi.</p> <p>La funzione permette di avviare in modo centralizzato il download dei dati censuari per gli anni 1991, 2001, 2011 e 2021. Per ciascun anno vengono automaticamente eseguite le procedure di:</p> <ul> <li>download dei dati censuari tabellari,</li> <li>download dei geodati (per tutte le Regioni o per quelle indicate),</li> <li>download dei confini amministrativi.</li> </ul> <p>Se <code>years</code> \u00e8 vuoto, vengono scaricati automaticamente i dati per tutti gli anni disponibili.</p> PARAMETER DESCRIPTION <code>years</code> <p>Lista degli anni censuari da scaricare. Se la lista \u00e8 vuota, saranno scaricati i dati dei censimenti: 1991, 2001, 2011 e 2021.</p> <p> TYPE: <code>List[int]</code> </p> <code>output_data_folder</code> <p>Percorso della cartella in cui salvare tutti i dati scaricati.</p> <p> TYPE: <code>Path</code> </p> <code>region_list</code> <p>Lista dei codici o nomi delle Regioni per cui scaricare i geodati. Se vuota, vengono scaricati i geodati di tutte le Regioni disponibili.</p> <p> TYPE: <code>List</code> DEFAULT: <code>[]</code> </p> RAISES DESCRIPTION <code>ValueError</code> <p>Se uno degli anni specificati non \u00e8 supportato o non esiste nella mappa.</p>"},{"location":"documentation/geodata/","title":"Modulo GeoData","text":"<p>Il modulo Geodata fornisce strumenti per la gestione e il preprocessing dei dati geografici, inclusi confini  amministrativi e dati censuari. Le funzioni di questo modulo facilitano la lettura, il filtraggio e la conversione  dei dati in formati utilizzabili per l'analisi geografica, come GeoDataFrame e GeoPackage.</p>"},{"location":"documentation/geodata/#istatcelldata.geodata.preprocess_geodata","title":"<code>preprocess_geodata(census_shp_folder, census_target_columns, census_tipo_loc_mapping, output_folder, census_layer_name, census_column_remapping=None, regions_file_path=None, regions_target_columns=None, regions_index_column=None, regions_column_remapping=None, provinces_file_path=None, provinces_target_columns=None, provinces_index_column=None, provinces_column_remapping=None, municipalities_file_path=None, municipalities_target_columns=None, municipalities_index_column=None, municipalities_column_remapping=None, municipalities_code=[])</code>","text":"<p>Preprocessa i dati geografici del censimento e i confini amministrativi e li salva in un GeoPackage.</p> <p>La funzione esegue l\u2019intero workflow di preparazione dei dati geografici per un anno di censimento, combinando:</p> <ol> <li>Lettura e normalizzazione dei confini amministrativi (regioni, province, comuni).</li> <li>Eventuale correzione di campi mancanti (es. <code>COD_PROV</code> per il 2021).</li> <li>Lettura e preparazione dei dati di censimento (sezioni) da shapefile.</li> <li>Join delle sezioni con i comuni, le province e le regioni.</li> <li>Eventuale filtro per un sottoinsieme di comuni (<code>municipalities_code</code>).</li> <li>Salvataggio del risultato finale in un GeoPackage.</li> </ol> PARAMETER DESCRIPTION <code>census_shp_folder</code> <p>Cartella contenente i file shapefile del censimento (sezioni).</p> <p> TYPE: <code>Path</code> </p> <code>census_target_columns</code> <p>Colonne da selezionare dai dati di censimento (sezioni).</p> <p> TYPE: <code>list</code> </p> <code>census_tipo_loc_mapping</code> <p>Mappatura per il campo <code>TIPO_LOC</code> per derivare la descrizione del tipo di localit\u00e0.</p> <p> TYPE: <code>dict</code> </p> <code>output_folder</code> <p>Cartella in cui salvare il GeoPackage risultante.</p> <p> TYPE: <code>Path</code> </p> <code>census_layer_name</code> <p>Nome del layer di censimento (es. <code>census2011</code>), usato anche per derivare l\u2019anno dal suffisso.</p> <p> TYPE: <code>str</code> </p> <code>census_column_remapping</code> <p>Mappatura per rinominare le colonne dei dati di censimento.</p> <p> TYPE: <code>dict</code> DEFAULT: <code>None</code> </p> <code>regions_file_path</code> <p>Percorso del file vettoriale dei confini regionali.</p> <p> TYPE: <code>Path</code> DEFAULT: <code>None</code> </p> <code>regions_target_columns</code> <p>Colonne da selezionare dai dati regionali.</p> <p> TYPE: <code>list</code> DEFAULT: <code>None</code> </p> <code>regions_index_column</code> <p>Colonna da utilizzare come indice per i dati regionali.</p> <p> TYPE: <code>str</code> DEFAULT: <code>None</code> </p> <code>regions_column_remapping</code> <p>Mappatura per rinominare le colonne dei dati regionali.</p> <p> TYPE: <code>dict</code> DEFAULT: <code>None</code> </p> <code>provinces_file_path</code> <p>Percorso del file vettoriale dei confini provinciali.</p> <p> TYPE: <code>Path</code> DEFAULT: <code>None</code> </p> <code>provinces_target_columns</code> <p>Colonne da selezionare dai dati provinciali.</p> <p> TYPE: <code>list</code> DEFAULT: <code>None</code> </p> <code>provinces_index_column</code> <p>Colonna da utilizzare come indice per i dati provinciali.</p> <p> TYPE: <code>str</code> DEFAULT: <code>None</code> </p> <code>provinces_column_remapping</code> <p>Mappatura per rinominare le colonne dei dati provinciali.</p> <p> TYPE: <code>dict</code> DEFAULT: <code>None</code> </p> <code>municipalities_file_path</code> <p>Percorso del file vettoriale dei confini comunali.</p> <p> TYPE: <code>Path</code> DEFAULT: <code>None</code> </p> <code>municipalities_target_columns</code> <p>Colonne da selezionare dai dati comunali.</p> <p> TYPE: <code>list</code> DEFAULT: <code>None</code> </p> <code>municipalities_index_column</code> <p>Colonna da utilizzare come indice per i dati comunali.</p> <p> TYPE: <code>str</code> DEFAULT: <code>None</code> </p> <code>municipalities_column_remapping</code> <p>Mappatura per rinominare le colonne dei dati comunali.</p> <p> TYPE: <code>dict</code> DEFAULT: <code>None</code> </p> <code>municipalities_code</code> <p>Lista di codici ISTAT dei comuni (campo <code>PRO_COM</code>) da estrarre. Se vuota, vengono mantenuti tutti i comuni.</p> <p> TYPE: <code>list[int]</code> DEFAULT: <code>[]</code> </p> RETURNS DESCRIPTION <code>Path</code> <p>Percorso del GeoPackage generato contenente il layer di censimento arricchito con informazioni amministrative.</p> <p> TYPE: <code>Path</code> </p> Notes <ul> <li>L\u2019anno del censimento viene ricavato dal nome del layer   <code>census_layer_name[6:]</code> (es. <code>census2011</code> \u2192 <code>2011</code>).</li> <li>Per il 2021 viene ricostruita manualmente la colonna <code>COD_PROV</code>   a partire da <code>PRO_COM_T</code> (vedi issue #47 del repository).</li> <li>Il GeoPackage viene salvato come <code>{YEAR_GEODATA_NAME}.gpkg</code> e il layer   come <code>{YEAR_GEODATA_NAME}{census_year}</code>.</li> </ul>"},{"location":"documentation/geodata/#istatcelldata.geodata.read_administrative_boundaries","title":"<code>read_administrative_boundaries(file_path, target_columns, index_column, column_remapping=None, output_folder=None, layer_name=None)</code>","text":"<p>Legge i confini amministrativi e restituisce un DataFrame o un GeoPackage.</p> <p>La funzione legge un file di confini amministrativi (tipicamente uno shapefile), seleziona un sottoinsieme di colonne e imposta una colonna come indice. In base ai parametri forniti, pu\u00f2:</p> <ul> <li>restituire un DataFrame privo della geometria, ordinato e indicizzato;</li> <li>salvare i dati come layer di un GeoPackage, mantenendo la geometria.</li> </ul> <p>L\u2019encoding viene ricavato dal file .dbf associato allo shapefile per evitare problemi di caratteri accentati o simboli speciali.</p> PARAMETER DESCRIPTION <code>file_path</code> <p>Percorso del file vettoriale (es. shapefile) contenente i confini amministrativi.</p> <p> TYPE: <code>Path</code> </p> <code>target_columns</code> <p>Lista delle colonne da selezionare dal dataset sorgente. La colonna di geometria viene aggiunta automaticamente.</p> <p> TYPE: <code>list</code> </p> <code>index_column</code> <p>Nome della colonna da usare come indice del DataFrame risultante (es. codice ISTAT).</p> <p> TYPE: <code>str</code> </p> <code>column_remapping</code> <p>Dizionario per rinominare le colonne (es. <code>{\"DEN_REG\": \"REGIONE\"}</code>). Se None, i nomi originali vengono mantenuti.</p> <p> TYPE: <code>dict</code> DEFAULT: <code>None</code> </p> <code>output_folder</code> <p>Cartella di output in cui salvare il GeoPackage. Se None, la funzione restituisce un DataFrame (senza geometria) invece di scrivere su disco.</p> <p> TYPE: <code>Path</code> DEFAULT: <code>None</code> </p> <code>layer_name</code> <p>Nome del layer da utilizzare all\u2019interno del GeoPackage. Deve essere valorizzato se <code>output_folder</code> \u00e8 fornito, per distinguere correttamente i layer.</p> <p> TYPE: <code>str</code> DEFAULT: <code>None</code> </p> RETURNS DESCRIPTION <code>Union[DataFrame, Path]</code> <p>Union[pd.DataFrame, Path]: - Un DataFrame indicizzato e ordinato, senza colonna di geometria,   se <code>output_folder</code> \u00e8 None. - Il percorso al file GeoPackage creato, se <code>output_folder</code> \u00e8 fornito.</p> Notes <ul> <li>La colonna di geometria viene aggiunta automaticamente a <code>target_columns</code>   tramite la costante <code>GEOMETRY_COLUMN_NAME</code>.</li> <li>Il GeoPackage viene salvato con nome basato sulla costante   <code>YEAR_GEODATA_NAME</code> e contiene il layer specificato da <code>layer_name</code>.</li> </ul>"},{"location":"documentation/geodata/#istatcelldata.geodata.read_census","title":"<code>read_census(shp_folder, target_columns, tipo_loc_mapping, column_remapping=None, output_folder=None, layer_name=None)</code>","text":"<p>Legge i dati di censimento da shapefile e restituisce un GeoDataFrame o un GeoPackage.</p> <p>La funzione cerca ricorsivamente tutti gli shapefile presenti in una cartella, ne legge i dati, seleziona un sottoinsieme di colonne, corregge le geometrie non valide, aggiunge la descrizione del tipo di localit\u00e0 (derivata da <code>tipo_loc_mapping</code>) e costruisce un GeoDataFrame unico con tutte le sezioni censuarie.</p> <p>In base ai parametri, pu\u00f2:</p> <ul> <li>restituire direttamente il GeoDataFrame risultante;</li> <li>salvare i dati come layer in un GeoPackage (<code>YEAR_GEODATA_NAME.gpkg</code>) e   restituire il percorso al file creato.</li> </ul> PARAMETER DESCRIPTION <code>shp_folder</code> <p>Percorso della cartella contenente i file shapefile del censimento (lettura ricorsiva tramite <code>rglob(\"*.shp\")</code>).</p> <p> TYPE: <code>Path</code> </p> <code>target_columns</code> <p>Lista delle colonne da selezionare da ciascuno shapefile (deve includere, o essere compatibile con, la colonna di geometria).</p> <p> TYPE: <code>list</code> </p> <code>tipo_loc_mapping</code> <p>Mappatura dei codici di localit\u00e0 per il campo <code>TIPO_LOC</code> (es. <code>{1: \"Centro abitato\", 2: \"Nucleo\", ...}</code>), usata per creare la colonna descrittiva <code>DEN_LOC</code>.</p> <p> TYPE: <code>dict</code> </p> <code>column_remapping</code> <p>Dizionario per rinominare le colonne selezionate (es. <code>{\"PRO_COM\": \"PRO_COMUNE\"}</code>). Se None, i nomi originali vengono mantenuti.</p> <p> TYPE: <code>dict</code> DEFAULT: <code>None</code> </p> <code>output_folder</code> <p>Cartella in cui salvare il GeoPackage risultante. Se None, la funzione non scrive su disco e restituisce direttamente il GeoDataFrame.</p> <p> TYPE: <code>Path</code> DEFAULT: <code>None</code> </p> <code>layer_name</code> <p>Nome del layer da utilizzare all\u2019interno del GeoPackage. Deve essere valorizzato se <code>output_folder</code> \u00e8 fornito.</p> <p> TYPE: <code>str</code> DEFAULT: <code>None</code> </p> RETURNS DESCRIPTION <code>Union[GeoDataFrame, Path]</code> <p>Union[gpd.GeoDataFrame, Path]: - Un <code>GeoDataFrame</code> con i dati di censimento e le geometrie corrette,   se <code>output_folder</code> \u00e8 None. - Il percorso al file GeoPackage creato, se <code>output_folder</code> \u00e8 fornito.</p> RAISES DESCRIPTION <code>ValueError</code> <p>Se nella cartella indicata non viene trovato alcun file shapefile.</p> Notes <ul> <li>Le geometrie vengono validate con <code>make_valid()</code> per ridurre i problemi   dovuti a poligoni non validi.</li> <li>Viene calcolata una colonna <code>area_mq</code> contenente l\u2019area in metri quadrati.</li> <li>L\u2019indice del GeoDataFrame viene impostato sulla prima colonna di <code>df_columns</code>   (tipicamente il codice della sezione censuaria).</li> </ul>"},{"location":"documentation/intro/","title":"Documentazione","text":"<p>Le funzioni sviluppate consentono di gestire sia i dati che i geodati censuari nella loro interezza. \u00c8 possibile infatti effettuare il download del dato e del geodato e successivamente processarlo.</p>"},{"location":"documentation/intro/#il-dato-sulle-celle-censuarie-negli-anni","title":"Il dato sulle celle censuarie negli anni","text":"<p>I dati censuari risultano essere differenti tra anno ed anno non solo per il loro contenuto ma anche e soprattutto  per la struttura dati con cui sono stati condivisi da ISTAT stessa.</p> <p>In particolare gli anni 1991 e 2001 risultano avere una struttura dati uguale ma differente rispetto a quella degli  anni 2011 e 2021 che a loro volta sono simili tra loro.</p> <p>Per il 2021 inoltre c'\u00e8 un totale cambio di nomenclatura dei file oltre che di url per il download dei soli dati.</p>"},{"location":"documentation/intro/#codice-regione","title":"Codice Regione","text":"<p>A partire dalla versione <code>0.6.0</code> \u00e8 possibile elaborare i dati non per forza di tutta l'Italia ma anche solo di una o pi\u00f9  regioni, l'utente pu\u00f2 scegliere. La scelta della o delle regioni da elaborare va fatta usado il codice della Regione di  interesse.</p> Codice Regione 01 Piemonte 02 Valle d\u2019Aosta/Vall\u00e9e d\u2019Aoste 03 Lombardia 04 Trentino-Alto Adige/S\u00fcdtirol 05 Veneto 06 Friuli-Venezia Giulia 07 Liguria 08 Emilia-Romagna 09 Toscana 10 Umbria 11 Marche 12 Lazio 13 Abruzzo 14 Molise 15 Campania 16 Puglia 17 Basilicata 18 Calabria 19 Sicilia 20 Sardegna <p>La fonte della tabella precedente \u00e8 questa.</p>"},{"location":"documentation/intro/#shared-data","title":"Shared data","text":"<p>DA RIVEDERE PER I DATI 2021</p> <p>Analizzando i tracciati dei censimenti 1991, 2001 e 2011 si \u00e8 evidenziata la presenza di campi che hanno mantenuto il loro codice. Questi campi sono stati definiti <code>SHARED_DATA</code> ed \u00e8 possibile ottenerli scartando quelli che negli anni hanno cambiato codice. I campi condivisi sono i seguenti:</p> <pre><code>SHARED_DATA = {\n    'pop_tot': {\n        'descrizione': 'Popolazione residente - TOTALE',\n        'codice': 'P1'\n    },\n    'pop_tot_m': {\n        'descrizione': 'Popolazione residente - Maschi',\n        'codice': 'P2'\n    },\n    'pop_tot_f': {\n        'descrizione': 'Popolazione residente - Femmine',\n        'codice': 'P3'\n    },\n    'pop_meno_5_anni': {\n        'descrizione': 'Popolazione residente - et\u00e0 &lt; 5 anni',\n        'codice': 'P14'\n    },\n    'pop_5_9_anni': {\n        'descrizione': 'Popolazione residente - et\u00e0 5 - 9 anni',\n        'codice': 'P15'\n    },\n    'pop_10_14_anni': {\n        'descrizione': 'Popolazione residente - et\u00e0 10 - 14 anni',\n        'codice': 'P16'\n    },\n    'pop_15_19_anni': {\n        'descrizione': 'Popolazione residente - et\u00e0 15 - 19 anni',\n        'codice': 'P17'\n    },\n    'pop_20_24_anni': {\n        'descrizione': 'Popolazione residente - et\u00e0 20 - 24 anni',\n        'codice': 'P18'\n    },\n    'pop_25_29_anni': {\n        'descrizione': 'Popolazione residente - et\u00e0 25 - 29 anni',\n        'codice': 'P19'\n    },\n    'pop_30_34_anni': {\n        'descrizione': 'Popolazione residente - et\u00e0 30 - 34 anni',\n        'codice': 'P20'\n    },\n    'pop_35_39_anni': {\n        'descrizione': 'Popolazione residente - et\u00e0 35 - 39 anni',\n        'codice': 'P21'\n    },\n    'pop_40_44_anni': {\n        'descrizione': 'Popolazione residente - et\u00e0 40 - 44 anni',\n        'codice': 'P22'\n    },\n    'pop_45_49_anni': {\n        'descrizione': 'Popolazione residente - et\u00e0 15 - 19 anni',\n        'codice': 'P23'\n    },\n    'pop_50_54_anni': {\n        'descrizione': 'Popolazione residente - et\u00e0 20 - 24 anni',\n        'codice': 'P24'\n    },\n    'pop_55_59_anni': {\n        'descrizione': 'Popolazione residente - et\u00e0 25 - 29 anni',\n        'codice': 'P25'\n    },\n    'pop_60_64_anni': {\n        'descrizione': 'Popolazione residente - et\u00e0 30 - 34 anni',\n        'codice': 'P26'\n    },\n    'pop_65_69_anni': {\n        'descrizione': 'Popolazione residente - et\u00e0 35 - 39 anni',\n        'codice': 'P27'\n    },\n    'pop_70_74_anni': {\n        'descrizione': 'Popolazione residente - et\u00e0 40 - 44 anni',\n        'codice': 'P28'\n    },\n    'pop_maggiore_74_anni': {\n        'descrizione': 'Popolazione residente - et\u00e0 &gt; 74 anni',\n        'codice': 'P29'\n    },\n    'pop_meno_5_anni_m': {\n        'descrizione': 'Popolazione residente - Maschi - et\u00e0 &lt; 5 anni',\n        'codice': 'P30'\n    },\n    'pop_5_9_anni_m': {\n        'descrizione': 'Popolazione residente - Maschi - et\u00e0 5 - 9 anni',\n        'codice': 'P31'\n    },\n    'pop_10_14_anni_m': {\n        'descrizione': 'Popolazione residente - Maschi - et\u00e0 10 - 14 anni',\n        'codice': 'P32'\n    },\n    'pop_15_19_anni_m': {\n        'descrizione': 'Popolazione residente - Maschi - et\u00e0 15 - 19 anni',\n        'codice': 'P33'\n    },\n    'pop_20_24_anni_m': {\n        'descrizione': 'Popolazione residente - Maschi - et\u00e0 20 - 24 anni',\n        'codice': 'P34'\n    },\n    'pop_25_29_anni_m': {\n        'descrizione': 'Popolazione residente - Maschi - et\u00e0 25 - 29 anni',\n        'codice': 'P35'\n    },\n    'pop_30_34_anni_m': {\n        'descrizione': 'Popolazione residente - Maschi - et\u00e0 30 - 34 anni',\n        'codice': 'P36'\n    },\n    'pop_35_39_anni_m': {\n        'descrizione': 'Popolazione residente - Maschi - et\u00e0 35 - 39 anni',\n        'codice': 'P37'\n    },\n    'pop_40_44_anni_m': {\n        'descrizione': 'Popolazione residente - Maschi - et\u00e0 40 - 44 anni',\n        'codice': 'P38'\n    },\n    'pop_45_49_anni_m': {\n        'descrizione': 'Popolazione residente - Maschi - et\u00e0 15 - 19 anni',\n        'codice': 'P39'\n    },\n    'pop_50_54_anni_m': {\n        'descrizione': 'Popolazione residente - Maschi - et\u00e0 20 - 24 anni',\n        'codice': 'P40'\n    },\n    'pop_55_59_anni_m': {\n        'descrizione': 'Popolazione residente - Maschi - et\u00e0 25 - 29 anni',\n        'codice': 'P41'\n    },\n    'pop_60_64_anni_m': {\n        'descrizione': 'Popolazione residente - Maschi - et\u00e0 30 - 34 anni',\n        'codice': 'P42'\n    },\n    'pop_65_69_anni_m': {\n        'descrizione': 'Popolazione residente - Maschi - et\u00e0 35 - 39 anni',\n        'codice': 'P43'\n    },\n    'pop_70_74_anni_m': {\n        'descrizione': 'Popolazione residente - Maschi - et\u00e0 40 - 44 anni',\n        'codice': 'P44'\n    },\n    'pop_maggiore_74_anni_m': {\n        'descrizione': 'Popolazione residente - Maschi - et\u00e0 &gt; 74 anni',\n        'codice': 'P45'\n    },\n    'lavoratori_tot': {\n        'descrizione': 'Forze lavoro - TOTALE',\n        'codice': 'P60'\n    },\n    'lavoratori_occupati': {\n        'descrizione': 'Forze lavoro - Occupati',\n        'codice': 'P61'\n    },\n    'lavoratori_disoccupati': {\n        'descrizione': 'Forze lavoro - Disoccupati e altre persone in cerca di occupazione',\n        'codice': 'P62'\n    },\n    'famiglie_tot': {\n        'descrizione': 'Famiglie totale',\n        'codice': 'PF1'\n    },\n    'famiglie_componenti_tot': {\n        'descrizione': 'Totale componenti delle famiglie',\n        'codice': 'PF2'\n    },\n    'famiglie_1_componente': {\n        'descrizione': 'Famiglie 1 componente',\n        'codice': 'PF3'\n    },\n    'famiglie_2_componenti': {\n        'descrizione': 'Famiglie 2 componenti',\n        'codice': 'PF4'\n    },\n    'famiglie_3_componenti': {\n        'descrizione': 'Famiglie 3 componenti',\n        'codice': 'PF5'\n    },\n    'famiglie_4_componenti': {\n        'descrizione': 'Famiglie 4 componenti',\n        'codice': 'PF6'\n    },\n    'famiglie_5_componenti': {\n        'descrizione': 'Famiglie 5 componenti',\n        'codice': 'PF7'\n    },\n    'famiglie_6_componenti_e_oltre': {\n        'descrizione': 'Famiglie 6 e oltre componenti',\n        'codice': 'PF8'\n    },\n    'famiglie_residenti_oltre_6_componenti': {\n        'descrizione': 'Componenti delle famiglie residenti di 6 e oltre componenti',\n        'codice': 'PF9'\n    },\n}\n</code></pre>"},{"location":"documentation/process/","title":"Modulo Process e Pre-process","text":"<p>Il modulo Process e Pre-process si concentra sulla gestione avanzata e sull'elaborazione dei dati del censimento,  integrando informazioni amministrative e combinando dati geografici e tabellari per ottenere dataset arricchiti. </p>"},{"location":"documentation/process/#istatcelldata.executor.process.finalize_census_data","title":"<code>finalize_census_data(census_data_path, years, output_data_folder=None, delete_preprocessed_data=False)</code>","text":"<p>Finalizza i dati del censimento unendo geodati e dati tabellari in un GeoPackage unico.</p> <p>Per ciascun anno indicato, la funzione: 1. Legge i dati geografici (sezioni di censimento) dal layer <code>census&lt;anno&gt;</code>. 2. Legge i dati tabellari dal layer <code>data&lt;anno&gt;</code>. 3. Rimuove eventuali colonne non necessarie dai dati tabellari. 4. Esegue il join tra dati geografici e tabellari sulla chiave <code>SEZ&lt;anno&gt;</code>. 5. Ordina i dati e costruisce un GeoDataFrame finale. 6. Salva il risultato in un GeoPackage denominato <code>census_data.gpkg</code>,    con un layer per anno (<code>census&lt;anno&gt;</code>).</p> PARAMETER DESCRIPTION <code>census_data_path</code> <p>Cartella contenente il file GeoPackage pre-processato (<code>census.gpkg</code>), generato dalle fasi precedenti del workflow.</p> <p> TYPE: <code>Path</code> </p> <code>years</code> <p>Lista degli anni di censimento da finalizzare (es. [1991, 2001, 2011, 2021]).</p> <p> TYPE: <code>list</code> </p> <code>output_data_folder</code> <p>Cartella in cui salvare il GeoPackage finale <code>census_data.gpkg</code>. Se None, il file viene salvato in <code>census_data_path</code>.</p> <p> TYPE: <code>Path</code> DEFAULT: <code>None</code> </p> <code>delete_preprocessed_data</code> <p>Se True, elimina il file <code>census.gpkg</code> dopo il completamento della finalizzazione.</p> <p> TYPE: <code>bool</code> DEFAULT: <code>False</code> </p> RAISES DESCRIPTION <code>FileNotFoundError</code> <p>Se il file GeoPackage principale <code>census.gpkg</code> non esiste nel percorso indicato da <code>census_data_path</code>.</p> <code>KeyError</code> <p>Se la colonna di join <code>SEZ&lt;anno&gt;</code> non \u00e8 presente nei dati geografici o tabellari, oppure se nel dizionario <code>census_data</code> non sono definite le colonne da rimuovere per l'anno in esame.</p> Notes <ul> <li>La chiave di join tra dati geografici e tabellari \u00e8 dinamica e segue   la convenzione <code>SEZ&lt;anno&gt;</code>.</li> <li>Le colonne da rimuovere dai dati tabellari sono definite in   <code>census_data[year]['data_columns_to_remove']</code>.</li> <li>Il GeoPackage finale pu\u00f2 contenere pi\u00f9 layer, uno per ogni anno   processato.</li> </ul>"},{"location":"documentation/process/#istatcelldata.executor.preprocess.preprocess_census","title":"<code>preprocess_census(processed_data_folder, years, output_data_folder=None, delete_download_folder=False, municipalities_code=[])</code>","text":"<p>Preprocessa i dati censuari per uno o pi\u00f9 anni, integrando geodati, confini amministrativi e dati tabellari.</p> <p>La funzione coordina l\u2019intero workflow di preprocessing dei censimenti, eseguendo per ciascun anno richiesto:</p> <ol> <li>Preprocessing dei dati geografici (shapefile/simili).</li> <li>Preprocessing dei dati tabellari (CSV).</li> <li>Aggiunta delle informazioni amministrative (opzionale).</li> <li>Salvataggio dei dati risultanti all\u2019interno di un GeoPackage.</li> <li>Eventuale eliminazione della cartella dei dati pre-processati.</li> </ol> <p>Gli input necessari vengono letti dal dizionario di configurazione <code>census_data</code>, che definisce paths, colonne, mapping e impostazioni specifiche per ogni anno censuario.</p> PARAMETER DESCRIPTION <code>processed_data_folder</code> <p>Cartella contenente i dati pre-scaricati o pre-processati (geodati, dati tabellari, confini amministrativi).</p> <p> TYPE: <code>Path</code> </p> <code>years</code> <p>Lista degli anni di censimento da processare (es. [1991, 2001, 2011, 2021]).</p> <p> TYPE: <code>List[int]</code> </p> <code>output_data_folder</code> <p>Cartella in cui salvare i dati elaborati (GeoPackage e layer associati). Se None, viene utilizzata la cartella padre di <code>processed_data_folder</code>.</p> <p> TYPE: <code>Path</code> DEFAULT: <code>None</code> </p> <code>delete_download_folder</code> <p>Se True, elimina la cartella <code>processed_data_folder</code> al termine del processo.</p> <p> TYPE: <code>bool</code> DEFAULT: <code>False</code> </p> <code>municipalities_code</code> <p>Lista di codici ISTAT dei comuni da filtrare nei dati (chiave <code>PRO_COM</code>). Se vuota, vengono usati tutti i comuni disponibili.</p> <p> TYPE: <code>list[int]</code> DEFAULT: <code>[]</code> </p> RETURNS DESCRIPTION <code>Path</code> <p>Percorso della cartella finale che contiene i dati elaborati.</p> RAISES DESCRIPTION <code>KeyError</code> <p>Se il dizionario <code>census_data</code> non contiene la configurazione per un anno richiesto.</p> <code>Exception</code> <p>Per eventuali errori durante la lettura, il preprocessing o il salvataggio.</p> Notes <ul> <li>Il file GeoPackage \u00e8 aperto e scritto tramite <code>sqlite3.connect()</code>.</li> <li>I layer inseriti nel GeoPackage seguono convenzioni come:<ul> <li><code>sezioni&lt;anno&gt;</code> per il layer geografico</li> <li><code>data&lt;anno&gt;</code> per il dataset tabellare</li> <li><code>tracciato&lt;anno&gt;</code> per il tracciato dei campi</li> </ul> </li> <li>Il parametro <code>municipalities_code</code> viene applicato nella fase dei geodati.</li> </ul>"},{"location":"documentation/process/#istatcelldata.census1991.process.add_administrative_info","title":"<code>add_administrative_info(census_data, regions_data_path, regions_target_columns, provinces_data_path, provinces_target_columns, municipalities_data_path, municipalities_target_columns)</code>","text":"<p>Arricchisce i dati censuari con informazioni amministrative (comuni, province, regioni).</p> <p>La funzione integra ai dati del censimento i codici e le denominazioni amministrative corrispondenti, partendo da tre sorgenti esterne: confini regionali, provinciali e comunali.</p> <p>Il flusso logico prevede: 1. Uniformazione dei nomi delle colonne del dataset censuario. 2. Lettura dei dataset amministrativi (regioni, province, comuni). 3. Merge dei comuni con le province. 4. Merge del risultato con le regioni. 5. Join finale con il dataset del censimento sulla chiave comunale (<code>PRO_COM</code>). 6. Pulizia e rinomina delle colonne amministrative finali.</p> PARAMETER DESCRIPTION <code>census_data</code> <p>Dataset del censimento a cui aggiungere le informazioni amministrative.</p> <p> TYPE: <code>DataFrame</code> </p> <code>regions_data_path</code> <p>Percorso del file contenente i dati delle regioni.</p> <p> TYPE: <code>Path</code> </p> <code>regions_target_columns</code> <p>Elenco delle colonne da estrarre dal dataset regionale (la prima colonna \u00e8 usata come indice).</p> <p> TYPE: <code>list</code> </p> <code>provinces_data_path</code> <p>Percorso del file contenente i dati delle province.</p> <p> TYPE: <code>Path</code> </p> <code>provinces_target_columns</code> <p>Elenco delle colonne da estrarre dal dataset provinciale (la prima colonna \u00e8 usata come indice).</p> <p> TYPE: <code>list</code> </p> <code>municipalities_data_path</code> <p>Percorso del file contenente i dati dei comuni.</p> <p> TYPE: <code>Path</code> </p> <code>municipalities_target_columns</code> <p>Elenco delle colonne da estrarre dal dataset comunale (la prima colonna \u00e8 usata come indice).</p> <p> TYPE: <code>list</code> </p> RETURNS DESCRIPTION <code>DataFrame</code> <p>pd.DataFrame: DataFrame del censimento arricchito con le informazioni amministrative su comuni, province e regioni.</p> Notes <ul> <li>Si assume che i codici amministrativi utilizzati per i merge siano:   <code>PRO_COM</code> (comune), <code>COD_PROV</code>/<code>COD_PRO</code> (provincia), <code>COD_REG</code> (regione).</li> <li>La funzione utilizza <code>read_administrative_boundaries()</code> per caricare   e filtrare i dataset amministrativi.</li> </ul>"},{"location":"documentation/utils/","title":"Modulo Utils","text":"<p>Il modulo Utils raccoglie una serie di funzioni di utilit\u00e0 per la gestione e la conversione di file, la creazione di  directory e l'estrazione di contenuti da archivi compressi. Queste funzioni sono fondamentali per supportare i processi  di gestione dei dati censuari e geografici.</p>"},{"location":"documentation/utils/#istatcelldata.utils.census_folder","title":"<code>census_folder(output_data_folder, year)</code>","text":"<p>Crea (se necessario) la cartella dedicata ai dati del censimento per un anno specifico.</p> <p>La funzione genera una directory denominata <code>census_&lt;anno&gt;</code> all\u2019interno della cartella <code>output_data_folder</code> e la crea se non esiste gi\u00e0. Questa cartella rappresenta la radice dei dati scaricati ed elaborati per un determinato censimento, mantenendo una struttura ordinata e coerente tra anni diversi.</p> PARAMETER DESCRIPTION <code>output_data_folder</code> <p>Cartella principale sotto cui creare la directory del censimento.</p> <p> TYPE: <code>Path</code> </p> <code>year</code> <p>Anno del censimento da organizzare (es. 1991, 2001, 2011, 2021).</p> <p> TYPE: <code>int</code> </p> RETURNS DESCRIPTION <code>Path</code> <p>Il percorso completo della cartella del censimento creata o gi\u00e0 esistente.</p> <p> TYPE: <code>Path</code> </p> RAISES DESCRIPTION <code>Exception</code> <p>Se la cartella non pu\u00f2 essere creata per motivi di permessi o percorsi non validi.</p>"},{"location":"documentation/utils/#istatcelldata.utils.check_encoding","title":"<code>check_encoding(data)</code>","text":"<p>Determina la codifica di un file leggendo un campione iniziale.</p> <p>La funzione apre il file in modalit\u00e0 binaria, legge i primi 100.000 byte e utilizza la libreria <code>chardet</code> per stimare la codifica del testo. Nel caso in cui <code>chardet</code> identifichi la codifica come <code>'ascii'</code>, questa viene convertita in <code>'latin1'</code> per garantire maggiore compatibilit\u00e0, poich\u00e9 molti file amministrativi e geografici possono contenere caratteri estesi pur essendo formalmente interpretati come ASCII.</p> PARAMETER DESCRIPTION <code>data</code> <p>Percorso del file di cui si vuole determinare la codifica.</p> <p> TYPE: <code>Path</code> </p> RETURNS DESCRIPTION <code>str</code> <p>La codifica rilevata. Se viene restituito <code>'ascii'</code>, viene automaticamente sostituito con <code>'latin1'</code>.</p> <p> TYPE: <code>str</code> </p> Notes <ul> <li><code>chardet</code> fornisce una stima heuristica della codifica; non \u00e8 infallibile.</li> <li>La lettura \u00e8 limitata ai primi 100.000 byte per migliorare le prestazioni.</li> <li><code>'latin1'</code> \u00e8 una scelta sicura per evitare errori su file con caratteri   accentati o codifiche ambigue tipiche dei dataset amministrativi ISTAT.</li> </ul>"},{"location":"documentation/utils/#istatcelldata.utils.csv_from_excel","title":"<code>csv_from_excel(data, output_path, metadata=False)</code>","text":"<p>Converte un file Excel (.xls) in formato CSV.</p> <p>La funzione legge un file Excel in formato legacy (.xls) tramite <code>xlrd</code> e converte il contenuto di un foglio in un file CSV. Se <code>metadata=True</code>, viene convertito il foglio chiamato \"Metadati\"; in caso contrario, viene convertito il primo foglio disponibile escludendo <code>\"Metadati\"</code> se presente.</p> <p>La conversione mantiene l'ordine delle righe e scrive tutti i campi con <code>csv.QUOTE_ALL</code> per garantire compatibilit\u00e0 e preservare delimitatori, stringhe con spazi o caratteri speciali.</p> PARAMETER DESCRIPTION <code>data</code> <p>Percorso del file Excel da convertire.</p> <p> TYPE: <code>Path</code> </p> <code>output_path</code> <p>Percorso del file CSV prodotto.</p> <p> TYPE: <code>Path</code> </p> <code>metadata</code> <p>Se True converte il foglio <code>\"Metadati\"</code>. Se False converte il primo foglio utile escludendo <code>\"Metadati\"</code> (default: False).</p> <p> TYPE: <code>bool</code> DEFAULT: <code>False</code> </p> RETURNS DESCRIPTION <code>Path</code> <p>Percorso del file CSV generato.</p> <p> TYPE: <code>Path</code> </p> RAISES DESCRIPTION <code>FileNotFoundError</code> <p>Se il file Excel indicato non esiste.</p> <code>XLRDError</code> <p>Se il file non pu\u00f2 essere letto o il foglio richiesto non esiste.</p> <code>Exception</code> <p>Per eventuali altri errori durante la conversione o la scrittura.</p> Notes <ul> <li>La conversione utilizza <code>xlrd</code>, pertanto il file deve essere in formato   <code>.xls</code> (Excel legacy). I file <code>.xlsx</code> non sono supportati da xlrd.</li> <li>Il CSV viene salvato in UTF-8.</li> <li>La funzione utilizza <code>tqdm</code> per mostrare una barra di avanzamento.</li> </ul>"},{"location":"documentation/utils/#istatcelldata.utils.get_census_dictionary","title":"<code>get_census_dictionary(census_year, region_list=[])</code>","text":"<p>Genera i link ufficiali ISTAT per dati censuari, geodati e confini amministrativi.</p> <p>La funzione costruisce dinamicamente i percorsi di download in base all\u2019anno di censimento e alla lista delle regioni desiderate. Gestisce le differenze strutturali fra censimenti precedenti (1991\u20132011) e quello del 2021.</p> PARAMETER DESCRIPTION <code>census_year</code> <p>Anno del censimento (1991, 2001, 2011 o 2021).</p> <p> TYPE: <code>int</code> </p> <code>region_list</code> <p>Lista delle regioni per cui generare i link dei geodati. Se vuota \u2192 regioni 1\u201320.</p> <p> TYPE: <code>List[int]</code> DEFAULT: <code>[]</code> </p> RETURNS DESCRIPTION <code>dict</code> <p>Dizionario contenente i link: - <code>data_url</code> per i dati del censimento - <code>geodata_urls</code> per le basi territoriali - <code>admin_boundaries_url</code> per i confini amministrativi - <code>census_code</code> codice primario per join e identificativi</p> <p> TYPE: <code>dict</code> </p> RAISES DESCRIPTION <code>ValueError</code> <p>Se l\u2019anno fornito non \u00e8 supportato.</p>"},{"location":"documentation/utils/#istatcelldata.utils.get_region","title":"<code>get_region(region_list=[])</code>","text":"<p>Restituisce la lista delle regioni da utilizzare per il download dei geodati.</p> <p>Se non viene fornita una lista, restituisce l\u2019elenco completo delle 20 regioni italiane (codici 1\u201320). In caso contrario, restituisce la lista fornita.</p> PARAMETER DESCRIPTION <code>region_list</code> <p>Lista dei codici delle regioni da utilizzare. Se vuota \u2192 restituisce tutte le regioni (1\u201320).</p> <p> TYPE: <code>List[int]</code> DEFAULT: <code>[]</code> </p> RETURNS DESCRIPTION <code>List[int]</code> <p>List[int]: Lista dei codici regione da processare.</p>"},{"location":"documentation/utils/#istatcelldata.utils.remove_files","title":"<code>remove_files(files_path)</code>","text":"<p>Rimuove una lista di file dal filesystem.</p> PARAMETER DESCRIPTION <code>files_path</code> <p>Lista di oggetti Path da eliminare.</p> <p> TYPE: <code>list</code> </p> Notes <ul> <li>Le eccezioni non vengono catturate: se un file non pu\u00f2 essere eliminato,   l\u2019errore emerge esplicitamente (comportamento desiderabile nel workflow ETL).</li> </ul>"},{"location":"documentation/utils/#istatcelldata.utils.unzip_data","title":"<code>unzip_data(input_data, output_folder)</code>","text":"<p>Decomprime un file ZIP nella cartella di destinazione specificata.</p> <p>La funzione apre un archivio ZIP e ne estrae l\u2019intero contenuto nella cartella indicata. Se la cartella di output non esiste, viene creata automaticamente. Funziona come componente interno del workflow di download dei dati ISTAT.</p> PARAMETER DESCRIPTION <code>input_data</code> <p>Percorso del file ZIP da decomprimere.</p> <p> TYPE: <code>Path</code> </p> <code>output_folder</code> <p>Cartella in cui estrarre il contenuto dell\u2019archivio.</p> <p> TYPE: <code>Path</code> </p> RETURNS DESCRIPTION <code>Path</code> <p>Il percorso della cartella contenente i file estratti.</p> <p> TYPE: <code>Path</code> </p> RAISES DESCRIPTION <code>FileNotFoundError</code> <p>Se il file ZIP non esiste.</p> <code>BadZipFile</code> <p>Se il file fornito non \u00e8 un ZIP valido.</p> <code>Exception</code> <p>Per qualsiasi errore durante la decompressione.</p>"},{"location":"documentation/utils/#istatcelldata.census1991.utils.census_trace","title":"<code>census_trace(file_path, year, output_path=None)</code>","text":"<p>Estrae il tracciato dei metadati dal foglio \u201cMetadati\u201d di un file Excel.</p> <p>La funzione accede al foglio denominato \"Metadati\" di un file Excel relativo ai dati censuari, ne estrae le colonne fondamentali (nome del campo e descrizione) e costruisce un DataFrame pandas con indice basato sul nome del campo. Se viene fornito un percorso di output, il tracciato viene salvato anche in formato CSV.</p> PARAMETER DESCRIPTION <code>file_path</code> <p>Percorso del file Excel da cui estrarre i metadati.</p> <p> TYPE: <code>Path</code> </p> <code>year</code> <p>Anno di riferimento del censimento, utilizzato per generare il nome del file di output.</p> <p> TYPE: <code>int</code> </p> <code>output_path</code> <p>Percorso della cartella in cui salvare il CSV del tracciato. Se None, viene restituito direttamente un DataFrame.</p> <p> TYPE: <code>Path</code> DEFAULT: <code>None</code> </p> RETURNS DESCRIPTION <code>Path</code> <p>Path | pd.DataFrame: - Il percorso del file CSV generato, se <code>output_path</code> \u00e8 fornito. - Un DataFrame pandas contenente il tracciato dei metadati,   se <code>output_path</code> \u00e8 None.</p> RAISES DESCRIPTION <code>FileNotFoundError</code> <p>Se il file Excel specificato non esiste.</p> <code>XLRDError</code> <p>Se si verifica un errore durante l\u2019apertura o la lettura del file Excel.</p> <code>Exception</code> <p>Per eventuali errori non previsti durante il parsing o il salvataggio.</p>"},{"location":"documentation/utils/#istatcelldata.census1991.utils.read_xls","title":"<code>read_xls(file_path, census_code, output_path=None)</code>","text":"<p>Legge un file Excel (.xls) e restituisce un DataFrame oppure salva i dati in CSV.</p> <p>La funzione apre un file Excel in formato <code>.xls</code>, seleziona automaticamente il primo foglio utile (escludendo eventuali fogli denominati \"Metadati\"), estrae le righe del foglio, costruisce un DataFrame pandas e imposta come indice la colonna corrispondente al codice censuario fornito.</p> <p>Se viene indicato un percorso di output, il DataFrame viene salvato in formato CSV; altrimenti, viene restituito direttamente.</p> PARAMETER DESCRIPTION <code>file_path</code> <p>Percorso del file Excel da leggere.</p> <p> TYPE: <code>Path</code> </p> <code>census_code</code> <p>Nome della colonna da utilizzare come indice del DataFrame (es. codice ISTAT del comune).</p> <p> TYPE: <code>str</code> </p> <code>output_path</code> <p>Percorso della cartella in cui salvare il CSV risultante. Se None, il DataFrame viene restituito senza salvare nulla.</p> <p> TYPE: <code>Path</code> DEFAULT: <code>None</code> </p> RETURNS DESCRIPTION <code>Union[DataFrame, Path]</code> <p>Union[pd.DataFrame, Path]: - Un DataFrame contenente i dati letti dal file Excel, se   <code>output_path</code> \u00e8 None. - Il percorso del file CSV salvato, se viene specificato   <code>output_path</code>.</p> RAISES DESCRIPTION <code>FileNotFoundError</code> <p>Se il file indicato non esiste.</p> <code>XLRDError</code> <p>Se si verifica un errore durante la lettura del file Excel.</p> <code>Exception</code> <p>Per qualsiasi errore non previsto durante il parsing o il salvataggio.</p>"},{"location":"documentation/utils/#istatcelldata.census2021.utils.read_xlsx","title":"<code>read_xlsx(file_path, output_path=None)</code>","text":"<p>Legge un file Excel (formato .xlsx) e lo converte in un DataFrame Pandas. Se specificato, salva i dati in formato CSV.</p> PARAMETER DESCRIPTION <code>file_path</code> <p>Il percorso del file Excel da leggere.</p> <p> TYPE: <code>Path</code> </p> <code>output_path</code> <p>Il percorso in cui salvare il file CSV generato. Se non viene specificato, restituisce il DataFrame.</p> <p> TYPE: <code>(Path, opzionale)</code> DEFAULT: <code>None</code> </p> RETURNS DESCRIPTION <code>Union[DataFrame, Path]</code> <p>Union[pd.DataFrame, Path]: Restituisce un DataFrame se <code>output_path</code> \u00e8 None,</p> <code>Union[DataFrame, Path]</code> <p>altrimenti restituisce il percorso del file CSV salvato.</p> RAISES DESCRIPTION <code>FileNotFoundError</code> <p>Se il file Excel specificato non viene trovato.</p> <code>ValueError</code> <p>Se il file Excel non pu\u00f2 essere letto correttamente.</p>"},{"location":"tutorial/intro/","title":"Tutorial","text":""},{"location":"tutorial/intro/#download-dei-dati-grezzi","title":"Download dei dati grezzi","text":"<p>Viene mostrato come effettuare il download dei dati grezzi. link</p>"},{"location":"tutorial/intro/#preprocessamento-dei-dati-grezzi","title":"Preprocessamento dei dati grezzi","text":"<p>Viene mostrato come preprocessare i dati grezzi. Dati preprocessati e dati grezzi sono contenuti nello stesso path. link</p>"},{"location":"tutorial/intro/#raggruppamento","title":"Raggruppamento","text":"<p>Viene mostrato come ottenere un unico GeoPackage per anno censuario. E' possibile mantenere i dati grezzi e    preprocessati, oppure eliminarli. link</p>"}]}